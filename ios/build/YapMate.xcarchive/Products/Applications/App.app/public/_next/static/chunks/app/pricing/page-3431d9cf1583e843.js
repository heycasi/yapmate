(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[979,881],{4867:function(e,t,a){Promise.resolve().then(a.bind(a,1329))},1329:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d}});var s=a(7437),r=a(2265),l=a(7138),n=a(6881),i=a(4407),o=a(9839),c=a(5188);function d(){let[e,t]=(0,r.useState)(null),[a,d]=(0,r.useState)(null),[m,x]=(0,r.useState)(!1),[u,p]=(0,r.useState)(!1),[y,g]=(0,r.useState)(!1),[h,f]=(0,r.useState)(!1),[b,w]=(0,r.useState)([]),[j,N]=(0,r.useState)(null),[v,k]=(0,r.useState)(!1);(0,r.useEffect)(()=>{I(),(0,o.Pj)()&&P()},[]);let I=async()=>{let e=(0,n.createBrowserClient)(),{data:{session:t}}=await e.auth.getSession();t&&(x(!0),d(await (0,i.Fk)(t.user.id)))},P=async()=>{f(!0);try{let e=await (0,o.si)();w(e),console.log("[Pricing] Loaded offerings:",e.length)}catch(e){console.error("[Pricing] Failed to load offerings:",e)}finally{f(!1)}},S=a=>{t(e===a?null:a)},C=async e=>{if(N(null),k(!1),!(0,o.Pj)()){p(!0),setTimeout(()=>p(!1),5e3);return}if(!m){N("Please log in to purchase a subscription"),setTimeout(()=>N(null),5e3);return}g(!0);try{let t="pro"===e?o.TQ.PRO_MONTHLY:o.TQ.TRADE_MONTHLY;console.log("[Pricing] Starting purchase:",t);let a=await (0,o.Hu)(t);if(!a.success){a.userCancelled||(N(a.error||"Purchase failed"),setTimeout(()=>N(null),5e3));return}console.log("[Pricing] Purchase successful, syncing to Supabase..."),a.customerInfo&&((await (0,c.h)(a.customerInfo)).success?(k(!0),await I(),setTimeout(()=>{k(!1)},3e3)):(N("Purchase succeeded but sync failed. Please contact support."),setTimeout(()=>N(null),5e3)))}catch(e){console.error("[Pricing] Purchase error:",e),N(e.message||"Purchase failed"),setTimeout(()=>N(null),5e3)}finally{g(!1)}};return(0,s.jsxs)("main",{className:"min-h-screen bg-yapmate-black text-white",children:[(0,s.jsx)("nav",{className:"border-b border-gray-800",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto px-6 py-4 flex justify-between items-center",children:[(0,s.jsx)(l.default,{href:"/",className:"px-6 py-2 border border-yapmate-yellow text-yapmate-yellow hover:bg-yapmate-yellow hover:text-yapmate-black font-semibold rounded transition-all uppercase tracking-wide text-sm",children:"← Home"}),m&&(0,s.jsx)(l.default,{href:"/dashboard",className:"px-6 py-2 bg-yapmate-gray-dark text-white border border-gray-800 hover:border-yapmate-yellow/50 font-medium rounded transition-all uppercase tracking-wide text-sm",children:"Dashboard"})]})}),(0,s.jsxs)("section",{className:"px-6 py-16 md:py-20 max-w-4xl mx-auto text-center",children:[(0,s.jsx)("h1",{className:"text-5xl md:text-6xl font-bold mb-4 uppercase tracking-tight",style:{fontFamily:"Space Grotesk, sans-serif"},children:"Pricing"}),(0,s.jsx)("p",{className:"text-xl md:text-2xl text-yapmate-gray-lightest max-w-2xl mx-auto",children:"Simple plans for UK trades. Start free. Upgrade when it saves you time."}),(0,o.Pj)()&&(0,s.jsx)("p",{className:"text-sm text-yapmate-gray-light mt-4",children:"7-day free trial included with Pro & Trade plans"})]}),v&&(0,s.jsx)("div",{className:"max-w-5xl mx-auto px-6 mb-8",children:(0,s.jsxs)("div",{className:"bg-yapmate-gray-dark border-2 border-yapmate-status-green rounded-xl p-6 text-center",children:[(0,s.jsx)("p",{className:"text-yapmate-status-green font-semibold mb-2 uppercase tracking-wide",children:"Subscription Active"}),(0,s.jsx)("p",{className:"text-yapmate-gray-lightest text-sm",children:"Your plan has been updated. Enjoy your new features!"})]})}),j&&(0,s.jsx)("div",{className:"max-w-5xl mx-auto px-6 mb-8",children:(0,s.jsxs)("div",{className:"bg-yapmate-gray-dark border-2 border-yapmate-status-red rounded-xl p-6 text-center",children:[(0,s.jsx)("p",{className:"text-yapmate-status-red font-semibold mb-2 uppercase tracking-wide",children:"Purchase Failed"}),(0,s.jsx)("p",{className:"text-yapmate-gray-lightest text-sm",children:j})]})}),u&&(0,s.jsx)("div",{className:"max-w-5xl mx-auto px-6 mb-8",children:(0,s.jsxs)("div",{className:"bg-yapmate-gray-dark border border-yapmate-yellow rounded-xl p-6 text-center",children:[(0,s.jsx)("p",{className:"text-white font-semibold mb-2",children:"Paid plans launch soon."}),(0,s.jsx)("p",{className:"text-yapmate-gray-lightest text-sm mb-4",children:"Join early access to get priority when subscriptions go live."}),(0,s.jsx)(l.default,{href:"/waitlist",className:"inline-block px-6 py-2 bg-gradient-to-br from-yapmate-gold to-yapmate-gold-dark text-yapmate-black font-bold rounded-lg hover:from-yapmate-gold-dark hover:to-yapmate-gold-darker transition-all shadow-yapmate-button uppercase tracking-wide text-sm",children:"Join Waitlist"})]})}),m&&a&&(0,s.jsx)("div",{className:"max-w-5xl mx-auto px-6 mb-8",children:(0,s.jsxs)("div",{className:"bg-yapmate-gray-dark border border-gray-800 rounded-xl p-4 text-center",children:[(0,s.jsx)("span",{className:"text-yapmate-gray-light text-sm uppercase tracking-wide mr-2",children:"Current Plan:"}),(0,s.jsx)("span",{className:"text-yapmate-yellow font-bold uppercase tracking-wide",children:(0,i.Nt)(a)})]})}),(0,s.jsx)("section",{className:"px-6 pb-16 max-w-6xl mx-auto",children:(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"bg-yapmate-gray-dark border border-gray-800 rounded-xl p-8 flex flex-col",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-2 text-white uppercase tracking-tight",style:{fontFamily:"Space Grotesk, sans-serif"},children:"Free"}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("span",{className:"text-5xl font-bold font-mono",children:"\xa30"}),(0,s.jsx)("span",{className:"text-yapmate-gray-lightest text-lg",children:" / month"})]}),(0,s.jsxs)("ul",{className:"space-y-3 mb-8 flex-grow text-sm",children:[(0,s.jsxs)("li",{className:"flex items-start",children:[(0,s.jsx)("span",{className:"text-yapmate-yellow mr-3 text-lg",children:"✓"}),(0,s.jsx)("span",{className:"text-yapmate-gray-lightest",children:(0,s.jsx)("strong",{children:"3 invoices total"})})]}),(0,s.jsxs)("li",{className:"flex items-start",children:[(0,s.jsx)("span",{className:"text-yapmate-yellow mr-3 text-lg",children:"✓"}),(0,s.jsx)("span",{className:"text-yapmate-gray-lightest",children:"Voice to invoice"})]}),(0,s.jsxs)("li",{className:"flex items-start",children:[(0,s.jsx)("span",{className:"text-yapmate-yellow mr-3 text-lg",children:"✓"}),(0,s.jsx)("span",{className:"text-yapmate-gray-lightest",children:"PDF download"})]}),(0,s.jsxs)("li",{className:"flex items-start",children:[(0,s.jsx)("span",{className:"text-yapmate-yellow mr-3 text-lg",children:"✓"}),(0,s.jsx)("span",{className:"text-yapmate-gray-lightest",children:"Yapmate branding"})]}),(0,s.jsxs)("li",{className:"flex items-start text-yapmate-gray-light",children:[(0,s.jsx)("span",{className:"mr-3 text-lg",children:"✗"}),(0,s.jsx)("span",{children:"No VAT, Reverse Charge, or CIS"})]})]}),"free"===a?(0,s.jsx)("div",{className:"w-full px-8 py-4 border border-gray-800 text-yapmate-gray-light font-semibold rounded-lg text-center uppercase tracking-wide text-sm",children:"Current Plan"}):m?(0,s.jsx)(l.default,{href:"/dashboard",className:"w-full px-8 py-4 border-2 border-yapmate-yellow text-yapmate-yellow hover:bg-yapmate-yellow hover:text-yapmate-black font-bold rounded-lg transition-all text-center uppercase tracking-wide text-sm",children:"Go to Dashboard"}):(0,s.jsx)(l.default,{href:"/signup",className:"w-full px-8 py-4 border-2 border-yapmate-yellow text-yapmate-yellow hover:bg-yapmate-yellow hover:text-yapmate-black font-bold rounded-lg transition-all text-center uppercase tracking-wide text-sm",children:"Start Free"})]}),(0,s.jsxs)("div",{className:"bg-yapmate-gray-dark border-2 border-yapmate-yellow rounded-xl p-8 flex flex-col relative",children:[(0,s.jsx)("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2",children:(0,s.jsx)("span",{className:"bg-yapmate-yellow text-yapmate-black px-4 py-1 text-xs font-bold uppercase tracking-wide rounded",children:"Recommended"})}),(0,s.jsx)("h2",{className:"text-2xl font-bold mb-2 text-yapmate-yellow uppercase tracking-tight",style:{fontFamily:"Space Grotesk, sans-serif"},children:"Pro"}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("span",{className:"text-5xl font-bold font-mono text-white",children:"\xa315"}),(0,s.jsx)("span",{className:"text-yapmate-gray-lightest text-lg",children:" / month"})]}),(0,s.jsxs)("ul",{className:"space-y-3 mb-8 flex-grow text-sm",children:[(0,s.jsxs)("li",{className:"flex items-start",children:[(0,s.jsx)("span",{className:"text-yapmate-yellow mr-3 text-lg",children:"✓"}),(0,s.jsx)("span",{className:"text-yapmate-gray-lightest",children:(0,s.jsx)("strong",{children:"Unlimited invoices"})})]}),(0,s.jsxs)("li",{className:"flex items-start",children:[(0,s.jsx)("span",{className:"text-yapmate-yellow mr-3 text-lg",children:"✓"}),(0,s.jsx)("span",{className:"text-yapmate-gray-lightest",children:"Voice to invoice"})]}),(0,s.jsxs)("li",{className:"flex items-start",children:[(0,s.jsx)("span",{className:"text-yapmate-yellow mr-3 text-lg",children:"✓"}),(0,s.jsx)("span",{className:"text-yapmate-gray-lightest",children:"VAT + Reverse Charge"})]}),(0,s.jsxs)("li",{className:"flex items-start",children:[(0,s.jsx)("span",{className:"text-yapmate-yellow mr-3 text-lg",children:"✓"}),(0,s.jsx)("span",{className:"text-yapmate-gray-lightest",children:"Customer list"})]}),(0,s.jsxs)("li",{className:"flex items-start",children:[(0,s.jsx)("span",{className:"text-yapmate-yellow mr-3 text-lg",children:"✓"}),(0,s.jsx)("span",{className:"text-yapmate-gray-lightest",children:"Clean PDFs"})]}),(0,s.jsxs)("li",{className:"flex items-start",children:[(0,s.jsx)("span",{className:"text-yapmate-gray-light mr-3 text-lg",children:"•"}),(0,s.jsx)("span",{className:"text-yapmate-gray-light text-xs",children:"For sole traders"})]})]}),"pro"===a?(0,s.jsx)("div",{className:"w-full px-8 py-4 bg-yapmate-gray-dark border border-gray-800 text-yapmate-gray-light font-semibold rounded-lg text-center uppercase tracking-wide text-sm",children:"Current Plan"}):m?(0,s.jsx)("button",{onClick:()=>C("pro"),disabled:y||h,className:"w-full px-8 py-4 bg-gradient-to-br from-yapmate-gold to-yapmate-gold-dark text-yapmate-black font-bold rounded-lg hover:from-yapmate-gold-dark hover:to-yapmate-gold-darker transition-all shadow-yapmate-button text-center uppercase tracking-wide text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:y?"Processing...":(0,o.Pj)()?"Start Free Trial":"Upgrade"}):(0,s.jsx)(l.default,{href:"/signup",className:"w-full px-8 py-4 bg-gradient-to-br from-yapmate-gold to-yapmate-gold-dark text-yapmate-black font-bold rounded-lg hover:from-yapmate-gold-dark hover:to-yapmate-gold-darker transition-all shadow-yapmate-button text-center uppercase tracking-wide text-sm",children:"Sign Up to Upgrade"})]}),(0,s.jsxs)("div",{className:"bg-yapmate-gray-dark border border-gray-800 rounded-xl p-8 flex flex-col",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-2 text-white uppercase tracking-tight",style:{fontFamily:"Space Grotesk, sans-serif"},children:"Trade"}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("span",{className:"text-5xl font-bold font-mono",children:"\xa325"}),(0,s.jsx)("span",{className:"text-yapmate-gray-lightest text-lg",children:" / month"})]}),(0,s.jsxs)("ul",{className:"space-y-3 mb-8 flex-grow text-sm",children:[(0,s.jsxs)("li",{className:"flex items-start",children:[(0,s.jsx)("span",{className:"text-yapmate-yellow mr-3 text-lg",children:"✓"}),(0,s.jsx)("span",{className:"text-yapmate-gray-lightest",children:(0,s.jsx)("strong",{children:"Everything in Pro"})})]}),(0,s.jsxs)("li",{className:"flex items-start",children:[(0,s.jsx)("span",{className:"text-yapmate-yellow mr-3 text-lg",children:"✓"}),(0,s.jsx)("span",{className:"text-yapmate-gray-lightest",children:"CIS deduction"})]}),(0,s.jsxs)("li",{className:"flex items-start",children:[(0,s.jsx)("span",{className:"text-yapmate-yellow mr-3 text-lg",children:"✓"}),(0,s.jsx)("span",{className:"text-yapmate-gray-lightest",children:"Bank details on invoice"})]}),(0,s.jsxs)("li",{className:"flex items-start",children:[(0,s.jsx)("span",{className:"text-yapmate-yellow mr-3 text-lg",children:"✓"}),(0,s.jsx)("span",{className:"text-yapmate-gray-lightest",children:"Priority support"})]}),(0,s.jsxs)("li",{className:"flex items-start",children:[(0,s.jsx)("span",{className:"text-yapmate-gray-light mr-3 text-lg",children:"•"}),(0,s.jsx)("span",{className:"text-yapmate-gray-light text-xs",children:"For CIS contractors"})]})]}),"trade"===a?(0,s.jsx)("div",{className:"w-full px-8 py-4 border border-gray-800 text-yapmate-gray-light font-semibold rounded-lg text-center uppercase tracking-wide text-sm",children:"Current Plan"}):m?(0,s.jsx)("button",{onClick:()=>C("trade"),disabled:y||h,className:"w-full px-8 py-4 border-2 border-yapmate-yellow text-yapmate-yellow hover:bg-yapmate-yellow hover:text-yapmate-black font-bold rounded-lg transition-all text-center uppercase tracking-wide text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:y?"Processing...":(0,o.Pj)()?"Start Free Trial":"Upgrade"}):(0,s.jsx)(l.default,{href:"/signup",className:"w-full px-8 py-4 border-2 border-yapmate-yellow text-yapmate-yellow hover:bg-yapmate-yellow hover:text-yapmate-black font-bold rounded-lg transition-all text-center uppercase tracking-wide text-sm",children:"Sign Up to Upgrade"})]})]})}),(0,s.jsxs)("section",{className:"px-6 pb-20 max-w-4xl mx-auto",children:[(0,s.jsx)("h2",{className:"text-3xl font-bold mb-8 text-center uppercase tracking-tight",style:{fontFamily:"Space Grotesk, sans-serif"},children:"Frequently Asked Questions"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"bg-yapmate-gray-dark border border-gray-800 rounded-xl overflow-hidden",children:[(0,s.jsxs)("button",{onClick:()=>S(0),className:"w-full px-6 py-4 text-left flex justify-between items-center hover:bg-gray-800/30 transition-colors",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Can I try before I buy?"}),(0,s.jsx)("span",{className:"text-yapmate-yellow text-xl",children:0===e?"−":"+"})]}),0===e&&(0,s.jsx)("div",{className:"px-6 pb-4 text-yapmate-gray-lightest text-sm leading-relaxed",children:"Yes. All paid plans include a 7-day free trial on iOS. Cancel anytime during the trial period at no cost."})]}),(0,s.jsxs)("div",{className:"bg-yapmate-gray-dark border border-gray-800 rounded-xl overflow-hidden",children:[(0,s.jsxs)("button",{onClick:()=>S(1),className:"w-full px-6 py-4 text-left flex justify-between items-center hover:bg-gray-800/30 transition-colors",children:[(0,s.jsx)("span",{className:"font-semibold",children:"What happens after my free trial?"}),(0,s.jsx)("span",{className:"text-yapmate-yellow text-xl",children:1===e?"−":"+"})]}),1===e&&(0,s.jsx)("div",{className:"px-6 pb-4 text-yapmate-gray-lightest text-sm leading-relaxed",children:"After 7 days, you'll be charged the monthly rate unless you cancel. You can cancel anytime via your iOS subscription settings."})]}),(0,s.jsxs)("div",{className:"bg-yapmate-gray-dark border border-gray-800 rounded-xl overflow-hidden",children:[(0,s.jsxs)("button",{onClick:()=>S(2),className:"w-full px-6 py-4 text-left flex justify-between items-center hover:bg-gray-800/30 transition-colors",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Can I upgrade or downgrade later?"}),(0,s.jsx)("span",{className:"text-yapmate-yellow text-xl",children:2===e?"−":"+"})]}),2===e&&(0,s.jsx)("div",{className:"px-6 pb-4 text-yapmate-gray-lightest text-sm leading-relaxed",children:"Yes. You can change plans anytime via your subscription settings. Changes take effect immediately."})]}),(0,s.jsxs)("div",{className:"bg-yapmate-gray-dark border border-gray-800 rounded-xl overflow-hidden",children:[(0,s.jsxs)("button",{onClick:()=>S(3),className:"w-full px-6 py-4 text-left flex justify-between items-center hover:bg-gray-800/30 transition-colors",children:[(0,s.jsx)("span",{className:"font-semibold",children:"How do I cancel my subscription?"}),(0,s.jsx)("span",{className:"text-yapmate-yellow text-xl",children:3===e?"−":"+"})]}),3===e&&(0,s.jsx)("div",{className:"px-6 pb-4 text-yapmate-gray-lightest text-sm leading-relaxed",children:"On iOS: Settings → Apple ID → Subscriptions → YapMate → Cancel. You'll retain access until the end of your billing period."})]})]})]})]})}},5188:function(e,t,a){"use strict";a.d(t,{h:function(){return r}});var s=a(4392);async function r(e,t){try{let a=(0,s.createClientComponentClient)(),{data:{session:r}}=await a.auth.getSession();if(!r)return{success:!1,error:"No active session"};let l=await a.functions.invoke("sync-revenuecat",{body:{customerInfo:e,revenuecatCustomerId:t}});if(l.error)return console.error("[IAP Sync] Failed:",l.error),{success:!1,error:l.error.message||"Sync failed"};let n=l.data;return console.log("[IAP Sync] Success:",n),{success:!0,plan:n.plan,status:n.status,expirationDate:n.expirationDate,willRenew:n.willRenew}}catch(e){return console.error("[IAP Sync] Error:",e),{success:!1,error:e.message||"Sync failed"}}}},9839:function(e,t,a){"use strict";a.d(t,{Hu:function(){return c},NS:function(){return d},O3:function(){return m},Pj:function(){return n},TQ:function(){return r},nG:function(){return i},si:function(){return o}});var s=a(7185);let r={PRO_MONTHLY:"com.yapmate.pro.monthly",TRADE_MONTHLY:"com.yapmate.trade.monthly"},l=!1;function n(){return"ios"===s.dV.getPlatform()}async function i(e,t){if(!n()){console.log("[IAP] Not available on web, skipping configuration");return}if(l){console.log("[IAP] Already configured, skipping");return}try{let{Purchases:s}=await a.e(586).then(a.bind(a,1938));await s.configure({apiKey:e,appUserID:t||void 0}),l=!0,console.log("[IAP] RevenueCat configured successfully",{appUserID:t})}catch(e){throw console.error("[IAP] Configuration failed:",e),Error("IAP configuration failed: ".concat(e.message))}}async function o(){if(!n())return console.warn("[IAP] getOfferings called on web - returning empty array"),[];if(!l)return console.error("[IAP] SDK not configured - call configureIAP first"),[];try{let{Purchases:e}=await a.e(586).then(a.bind(a,1938)),t=await e.getOfferings();if(!t.current)return console.warn("[IAP] No current offering found"),[];let s=[t.current,...Object.values(t.all)];return console.log("[IAP] Loaded offerings:",s.length),s}catch(e){return console.error("[IAP] Failed to get offerings:",e),[]}}async function c(e){if(!n())return{success:!1,error:"In-app purchases are only available on iOS. Please use the mobile app."};if(!l)return{success:!1,error:"IAP not configured"};try{let{Purchases:s}=await a.e(586).then(a.bind(a,1938));console.log("[IAP] Starting purchase by product ID:",e);let r=await s.getOfferings(),l=[r.current,...Object.values(r.all||{})].filter(Boolean),n=null;for(let a of l){if(null==a?void 0:a.availablePackages)for(let s of a.availablePackages){var t;if((null===(t=s.product)||void 0===t?void 0:t.identifier)===e){n=s.product;break}}if(n)break}if(!n)return{success:!1,error:"Product not found in available offerings"};let i=await s.purchaseStoreProduct({product:n});return console.log("[IAP] Purchase successful"),{success:!0,customerInfo:i.customerInfo}}catch(e){if(console.error("[IAP] Purchase failed:",e),"USER_CANCELLED"===e.code||e.userCancelled)return{success:!1,error:"Purchase cancelled",userCancelled:!0};return{success:!1,error:e.message||"Purchase failed"}}}async function d(){if(!n())return{success:!1,error:"In-app purchases are only available on iOS. Please use the mobile app."};if(!l)return{success:!1,error:"IAP not configured"};try{let{Purchases:e}=await a.e(586).then(a.bind(a,1938));console.log("[IAP] Restoring purchases...");let t=await e.restorePurchases();return console.log("[IAP] Restore successful"),{success:!0,customerInfo:t.customerInfo}}catch(e){return console.error("[IAP] Restore failed:",e),{success:!1,error:e.message||"Failed to restore purchases"}}}async function m(){if(!n())return console.warn("[IAP] getCustomerInfo called on web"),null;if(!l)return console.error("[IAP] SDK not configured"),null;try{let{Purchases:e}=await a.e(586).then(a.bind(a,1938));return(await e.getCustomerInfo()).customerInfo}catch(e){return console.error("[IAP] Failed to get customer info:",e),null}}},4407:function(e,t,a){"use strict";a.d(t,{De:function(){return i},Fk:function(){return l},Nt:function(){return d},canUseCIS:function(){return c},canUseVAT:function(){return o}});var s=a(6881);let r={free:{maxInvoices:3,canUseVAT:!1,canUseCIS:!1},pro:{maxInvoices:null,canUseVAT:!0,canUseCIS:!1},trade:{maxInvoices:null,canUseVAT:!0,canUseCIS:!0}};async function l(e){let t=(0,s.createBrowserClient)(),{data:a,error:r}=await t.from("user_preferences").select("plan").eq("user_id",e).single();return r||!a?(console.warn("Failed to fetch user plan, defaulting to free:",r),"free"):a.plan}async function n(e){let t=(0,s.createBrowserClient)(),{count:a,error:r}=await t.from("invoices").select("*",{count:"exact",head:!0}).eq("user_id",e);return r?(console.error("Failed to fetch invoice count:",r),0):a||0}async function i(e){let t=r[await l(e)];if(null===t.maxInvoices)return{canCreate:!0};let a=await n(e);return a>=t.maxInvoices?{canCreate:!1,reason:"You've reached the limit of ".concat(t.maxInvoices," invoices on the free plan"),currentCount:a,limit:t.maxInvoices}:{canCreate:!0,currentCount:a,limit:t.maxInvoices}}async function o(e){return r[await l(e)].canUseVAT}async function c(e){return r[await l(e)].canUseCIS}function d(e){return({free:"Free",pro:"Pro",trade:"Trade"})[e]}},6881:function(e,t,a){"use strict";a.d(t,{O:function(){return n},createBrowserClient:function(){return o}});var s=a(7204);a(4392);let r="https://nidijdprgoauwkmuioer.supabase.co",l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5pZGlqZHByZ29hdXdrbXVpb2VyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUyMDc4NzcsImV4cCI6MjA4MDc4Mzg3N30.kpCiLgYxayUlUOPM0Uip1QsT5wnBpj7gv8yLKOB0vDY";if(!r||!l)throw Error("Missing Supabase environment variables");let n=(0,s.eI)(r,l),i=null;function o(){return i||(i=(0,s.eI)(r,l))}},7138:function(e,t,a){"use strict";a.d(t,{default:function(){return r.a}});var s=a(231),r=a.n(s)}},function(e){e.O(0,[392,231,790,971,23,744],function(){return e(e.s=4867)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[374,881],{9745:function(e,t,s){Promise.resolve().then(s.bind(s,4870))},4870:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var a=s(7437),r=s(2265),n=s(6881),i=s(6463),c=s(7138),l=s(6079);function o(){let[e,t]=(0,r.useState)([]),[s,o]=(0,r.useState)(!0),u=(0,i.useRouter)(),m=(0,n.createBrowserClient)();(0,r.useEffect)(()=>{d(),h()},[]);let d=async()=>{let{data:{session:e}}=await m.auth.getSession();e||u.push("/login")},h=async()=>{try{let{data:e,error:s}=await m.from("customers").select("*, invoices!customer_id(id)").order("created_at",{ascending:!1});if(s)throw s;t(e||[])}catch(e){console.error("Error fetching customers:",e)}finally{o(!1)}},x=e=>{if(!e)return"?";let t=e.trim().split(" ");return 1===t.length?t[0].charAt(0).toUpperCase():(t[0].charAt(0)+t[t.length-1].charAt(0)).toUpperCase()};return s?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-white text-xl",children:"Loading..."})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("main",{className:"min-h-screen p-8 pb-24",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-white mb-8",children:"Customers"}),(0,a.jsx)("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-6",children:0===e.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("p",{className:"text-gray-400",children:"No customers yet"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm mt-2",children:"Customers are automatically created when you record invoices with customer names"})]}):(0,a.jsx)("div",{className:"space-y-3",children:e.map(e=>{var t;let s=(null===(t=e.invoices)||void 0===t?void 0:t.length)||0;return(0,a.jsxs)(c.default,{href:"/customers/detail?id=".concat(e.id),className:"bg-black/20 rounded-lg p-4 flex items-center gap-4 hover:bg-black/30 transition-colors cursor-pointer block",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-yapmate-amber-500 flex items-center justify-center flex-shrink-0",children:(0,a.jsx)("span",{className:"text-yapmate-black font-bold text-lg",children:x(e.name)})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"text-white font-semibold text-base mb-1",children:e.name}),(0,a.jsxs)("p",{className:"text-yapmate-slate-400 text-sm mb-2",children:[s," ",1===s?"invoice":"invoices"]}),e.email&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-yapmate-slate-400 text-sm mb-1",children:[(0,a.jsx)("span",{children:"\uD83D\uDCE7"}),(0,a.jsx)("span",{className:"truncate",children:e.email})]}),e.phone&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-yapmate-slate-400 text-sm",children:[(0,a.jsx)("span",{children:"\uD83D\uDCDE"}),(0,a.jsx)("span",{children:e.phone})]})]}),(0,a.jsx)("div",{className:"text-yapmate-slate-400 text-2xl flex-shrink-0",children:"›"})]},e.id)})})})]})}),(0,a.jsx)(l.Z,{})]})}},6079:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(7437),r=s(7138),n=s(6463);function i(){let e=(0,n.usePathname)();return(0,a.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-yapmate-black/95 backdrop-blur-lg border-t border-yapmate-slate-800 pb-safe",children:(0,a.jsx)("div",{className:"flex justify-around items-center",style:{height:"68px"},children:[{href:"/record",label:"Record",icon:"\uD83C\uDFA4"},{href:"/dashboard",label:"Invoices",icon:"\uD83D\uDCC4"},{href:"/customers",label:"Customers",icon:"\uD83D\uDC65"},{href:"/settings",label:"Settings",icon:"⚙️"}].map(t=>{let s=e===t.href;return(0,a.jsxs)(r.default,{href:t.href,className:"flex flex-col items-center justify-center flex-1 h-full transition-colors duration-200 tap-highlight ".concat(s?"text-yapmate-amber-500":"text-yapmate-slate-400 active:text-yapmate-slate-200"),children:[(0,a.jsx)("span",{className:"text-2xl mb-1",children:t.icon}),(0,a.jsx)("span",{className:"text-xs font-semibold",children:t.label})]},t.href)})})})}},6881:function(e,t,s){"use strict";s.d(t,{O:function(){return i},createBrowserClient:function(){return l}});var a=s(7204);s(4392);let r="https://nidijdprgoauwkmuioer.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5pZGlqZHByZ29hdXdrbXVpb2VyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUyMDc4NzcsImV4cCI6MjA4MDc4Mzg3N30.kpCiLgYxayUlUOPM0Uip1QsT5wnBpj7gv8yLKOB0vDY";if(!r||!n)throw Error("Missing Supabase environment variables");let i=(0,a.eI)(r,n),c=null;function l(){return c||(c=(0,a.eI)(r,n))}},7138:function(e,t,s){"use strict";s.d(t,{default:function(){return r.a}});var a=s(231),r=s.n(a)},6463:function(e,t,s){"use strict";var a=s(1169);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[392,231,971,23,744],function(){return e(e.s=9745)}),_N_E=e.O()}]);